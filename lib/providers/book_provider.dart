import 'package:flutter/material.dart';import '../models/book_model.dart';import '../services/api_service.dart';class BookProvider with ChangeNotifier {  final ApiService _apiService = ApiService();  List<BookModel> _books = [];  bool _isLoading = false;  String? _error;  int _startIndex = 0;  final int _maxResults = 20;  bool _hasMore = true;  String _currentQuery = 'flutter';  List<BookModel> get books => _books;  bool get isLoading => _isLoading;  String? get error => _error;  bool get hasMore => _hasMore;  String get currentQuery => _currentQuery;  Future<void> searchBooks(String query) async {    if (query.isEmpty) return;    _currentQuery = query;    _startIndex = 0;    _books = [];    _hasMore = true;    await fetchInitialBooks();  }  Future<void> fetchInitialBooks() async {    if (_isLoading) return;    _isLoading = true;    _error = null;    notifyListeners();    try {      final newBooks = await _apiService.fetchBooks(        query: _currentQuery,        startIndex: _startIndex,        maxResults: _maxResults,      );      _books = newBooks;      _startIndex = newBooks.length;      _hasMore = newBooks.length == _maxResults;    } catch (e) {      _error = e.toString();    } finally {      _isLoading = false;      notifyListeners();    }  }  Future<void> loadMoreBooks() async {    if (_isLoading || !_hasMore) return;    _isLoading = true;    notifyListeners();    try {      final newBooks = await _apiService.fetchBooks(        query: _currentQuery,        startIndex: _startIndex,        maxResults: _maxResults,      );      _books.addAll(newBooks);      _startIndex += newBooks.length;      _hasMore = newBooks.length == _maxResults;    } catch (e) {      _error = e.toString();    } finally {      _isLoading = false;      notifyListeners();    }  }}